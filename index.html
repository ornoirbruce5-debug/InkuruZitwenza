<!DOCTYPE html>
<html lang="rw">
<head>
  <!-- Meta -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Jeune Boutique â€” Digital Dropshipping Media</title>
  <meta name="description" content="Supermarket ya digital ya Jeune Boutique: ibicuruzwa, chatbot y'ubwenge, jokes, testimonials, na serivisi zihuta." />

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&family=Inter:wght@400;600&display=swap" rel="stylesheet">

  <!-- Styles: youth-focused UI, responsive, dark mode ready -->
  <style>
    :root{
      --bg:#0c0f13; --bg-alt:#121621; --text:#f7f9fc; --muted:#afbacb;
      --primary:#ff4da6; --primary-2:#ff82c4; --blue:#4f8cff; --green:#25d366; --yellow:#ffd166; --danger:#ff4d4d;
      --card:#181d2a; --glass:rgba(255,255,255,0.08); --border:#263049;
      --shadow:0 10px 30px rgba(0,0,0,0.35);
      --radius:14px;
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0}
    body{
      font-family:Poppins,Inter,system-ui,Segoe UI,Roboto,"Helvetica Neue",Arial,sans-serif;
      background:linear-gradient(120deg,#0b0e13 0%, #111626 40%, #0b132b 100%);
      color:var(--text); line-height:1.6;
    }

    /* Header/nav */
    header{
      position:sticky; top:0; z-index:1000;
      background:linear-gradient(180deg, rgba(12,15,19,0.8), rgba(12,15,19,0.4));
      backdrop-filter: blur(8px);
      border-bottom:1px solid rgba(255,255,255,0.06);
    }
    .nav{
      max-width:1100px; margin:0 auto; padding:0.75rem 1rem;
      display:flex; align-items:center; justify-content:space-between; gap:0.75rem;
    }
    .brand{
      font-weight:800; color:#fff; text-decoration:none; letter-spacing:0.3px;
      background:linear-gradient(90deg, var(--primary), var(--blue));
      -webkit-background-clip:text; background-clip:text; -webkit-text-fill-color:transparent;
      font-size:1.25rem;
    }
    .nav-links{list-style:none; display:flex; gap:0.6rem; margin:0; padding:0;}
    .nav-links a{
      color:var(--muted); text-decoration:none; padding:0.5rem 0.7rem; border-radius:10px;
      transition:all 140ms ease;
    }
    .nav-links a:hover{ color:#fff; background:var(--glass); }

    /* Buttons */
    .btn{border:none; border-radius:12px; padding:0.7rem 1rem; font-weight:600; cursor:pointer; transition:transform 120ms ease, background 120ms ease;}
    .btn.primary{ background:linear-gradient(90deg, var(--primary), var(--primary-2)); color:#fff; box-shadow:var(--shadow);}
    .btn.primary:hover{ transform:translateY(-1px); }
    .btn.secondary{ background:var(--card); color:#fff; border:1px solid var(--border); }
    .btn.icon{ background:var(--card); color:#fff; border:1px solid var(--border); border-radius:10px; padding:0.5rem 0.7rem; }

    /* Sections */
    .section{ padding:3rem 1rem; }
    .section.alt{ background:rgba(18,22,33,0.6); }
    .container{ max-width:1100px; margin:0 auto; }
    h2{ font-size: clamp(1.4rem,3.5vw,2rem); margin:0 0 1rem; }
    p.lead{ color:var(--muted); margin-top:0.25rem; }

    /* Hero: video bg + fallback image + voice button */
    .hero{
      position:relative; min-height:90vh; display:grid; place-items:center; text-align:center;
      background:url('fallback.jpg') center/cover no-repeat; overflow:hidden;
    }
    .hero video{ position:absolute; inset:0; width:100%; height:100%; object-fit:cover; z-index:-1; filter:brightness(0.55) saturate(1.1); }
    .hero-content{ max-width:820px; padding:1rem; animation:fadeUp 700ms ease both; }
    .hero h1{
      font-size: clamp(2rem,5vw,3.4rem); margin:0 0 0.5rem;
      background:linear-gradient(90deg, #fff, #cfe3ff); -webkit-background-clip:text; background-clip:text; -webkit-text-fill-color:transparent;
    }
    .hero-sub{ color:#d6def0; margin-bottom:1rem; }
    .hero-ctas{ display:flex; gap:0.7rem; justify-content:center; flex-wrap:wrap; }

    /* Stock table */
    .stock-controls{ display:flex; gap:0.7rem; margin-bottom:1rem; flex-wrap:wrap; }
    .stock-controls input,.stock-controls select{
      background:var(--card); color:#fff; border:1px solid var(--border); border-radius:10px; padding:0.6rem 0.8rem;
    }
    .table-wrap{ overflow-x:auto; background:var(--glass); border:1px solid var(--border); border-radius:var(--radius); }
    table{ width:100%; border-collapse:collapse; }
    thead{ background:rgba(38,48,73,0.6); }
    th,td{ padding:0.75rem; text-align:left; }
    td img{ width:64px; height:64px; object-fit:cover; border-radius:10px; }
    tbody tr{ border-top:1px solid rgba(255,255,255,0.06); }

    .cart-summary{
      display:flex; align-items:center; justify-content:space-between; gap:1rem; margin-top:1rem; flex-wrap:wrap;
      background:var(--glass); border:1px solid var(--border); padding:0.75rem 1rem; border-radius:12px;
    }

    /* Testimonials */
    .testimonials{ display:grid; grid-template-columns:repeat(auto-fit,minmax(240px,1fr)); gap:1rem; }
    .testimonial{ background:var(--glass); border:1px solid var(--border); border-radius:var(--radius); padding:1rem; }
    .stars{ color:var(--yellow); }

    /* Joke box */
    .joke-box{ background:var(--glass); border:1px solid var(--border); border-radius:var(--radius); padding:1rem; display:flex; gap:1rem; align-items:center; justify-content:space-between; }

    /* Chatbot: youthful UI */
    .chat-grid{ display:grid; grid-template-columns:1fr; gap:1rem; }
    .model-select{ display:flex; gap:0.6rem; align-items:center; }
    .model-select select{ background:var(--card); color:#fff; border:1px solid var(--border); border-radius:8px; padding:0.4rem 0.6rem; }
    .chat-window{
      background:linear-gradient(180deg, rgba(24,29,42,0.8), rgba(27,32,45,0.8));
      border:1px solid var(--border); border-radius:16px; min-height:280px; padding:1rem; display:grid; gap:0.6rem;
    }
    .chat-message{
      display:inline-flex; gap:0.6rem; align-items:flex-start; max-width:82%;
      padding:0.6rem 0.8rem; border-radius:14px; animation:fadeIn 300ms ease both;
    }
    .chat-message.user{ background:#1f2532; justify-self:end; }
    .chat-message.bot{ background:#242a3a; justify-self:start; }
    .chat-message .avatar{ width:32px; height:32px; border-radius:50%; object-fit:cover; }
    .chat-controls{ display:flex; gap:0.6rem; }
    .chat-controls input{
      flex:1; background:var(--card); color:#fff; border:1px solid var(--border); border-radius:12px; padding:0.7rem 0.9rem;
    }

    /* Map */
    .map-embed iframe{ border-radius:12px; border:1px solid var(--border); }

    /* Support */
    .support-card{ background:var(--glass); border:1px solid var(--border); border-radius:var(--radius); padding:1rem; }

    /* Footer */
    footer{ background:#0a0d12; padding:2rem 1rem; margin-top:2rem; border-top:1px solid rgba(255,255,255,0.06); }
    .footer-grid{ display:grid; grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); gap:1rem; }
    .qr{ width:140px; height:auto; border-radius:10px; border:1px solid var(--border); }

    /* Animations */
    @keyframes fadeUp{ from{opacity:0; transform:translateY(10px)} to{opacity:1; transform:translateY(0)} }
    @keyframes fadeIn{ from{opacity:0; transform:translateY(4px)} to{opacity:1; transform:translateY(0)} }

    /* Mobile tweaks */
    @media (max-width:700px){
      .nav-links{ display:none; }
      .chat-message{ max-width:94%; }
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header>
    <nav class="nav">
      <a class="brand" href="#hero">Jeune Boutique</a>
      <ul class="nav-links">
        <li><a href="#stock">Ibicuruzwa</a></li>
        <li><a href="#feedback">Testimonials</a></li>
        <li><a href="#jokes">Jokes</a></li>
        <li><a href="#chat">Chatbot</a></li>
        <li><a href="#map">Aho turi</a></li>
        <li><a href="#contact">Contact</a></li>
      </ul>
      <button id="playAudioNav" class="btn icon" title="Ubutumwa mu gifaransa">ğŸ”Š</button>
    </nav>
  </header>

  <!-- Hero: video background + fallback image + voice -->
  <!-- Comment: Video yohereza ama vibes ya jeune; poster + CSS fallback image. -->
  <section id="hero" class="hero">
    <video autoplay muted loop playsinline poster="fallback.jpg">
      <source src="background.mp4" type="video/mp4" />
    </video>
    <audio id="heroAudio" src="message-fr.mp3" preload="none"></audio>

    <div class="hero-content">
      <h1>Jeune Boutique</h1>
      <p class="hero-sub">Digital dropshipping media â€” Ubwiza, Ubushya, nâ€™ivune yâ€™abakobwa jeune ğŸ’–âœ¨</p>
      <div class="hero-ctas">
        <button id="playAudio" class="btn primary">Ubutumwa mu gifaransa ğŸ”Š</button>
        <a href="#stock" class="btn secondary">Dushorere kugiciro gito ğŸ›ï¸</a>
      </div>
    </div>
  </section>

  <!-- Stock Section: search, categories, table, cart -->
  <!-- Comment: Table is populated from inline catalogue; animations kuri row entry. -->
  <section id="stock" class="section">
    <div class="container">
      <h2>Ibicuruzwa biri mu bubiko</h2>
      <p class="lead">Andika ushakisha: â€œamataâ€ cyangwa uhitamo category â€œElectronicsâ€.</p>

      <div class="stock-controls">
        <input id="searchInput" type="search" placeholder="Andika: 'Ndashaka amata' cyangwa 'Electronics'..." />
        <select id="categorySelect">
          <option value="">Byose</option>
          <option value="Groceries">Groceries</option>
          <option value="Electronics">Electronics</option>
          <option value="Beauty">Beauty</option>
          <option value="Home">Home</option>
        </select>
      </div>

      <div class="table-wrap">
        <table>
          <thead>
            <tr>
              <th>Image</th>
              <th>Izina</th>
              <th>Description</th>
              <th>Igiciro (BIF)</th>
              <th>Status</th>
              <th>Cart</th>
            </tr>
          </thead>
          <tbody id="stockBody"><!-- JS will populate --></tbody>
        </table>
      </div>

      <div class="cart-summary">
        <p id="cartInfo">Cart yawe ifite ibintu 0, total 0 BIF ğŸ§º</p>
        <button id="checkoutBtn" class="btn primary">Checkout via WhatsApp ğŸ’¬</button>
      </div>
    </div>
  </section>

  <!-- Feedback -->
  <!-- Comment: Youthful testimonials nâ€™amaso yâ€™urubyiruko (emojis + stars). -->
  <section id="feedback" class="section alt">
    <div class="container">
      <h2>Ibitekerezo byâ€™abakiriya</h2>
      <div class="testimonials">
        <article class="testimonial">
          <div class="stars" aria-label="5 stars">â­â­â­â­â­</div>
          <p>â€œDesign ya site iraryoshye kandi moderne, ndakunda colors!â€ ğŸ’–âœ¨</p>
          <span class="name">â€” Aline, Gihosha</span>
        </article>
        <article class="testimonial">
          <div class="stars" aria-label="4 stars">â­â­â­â­</div>
          <p>â€œAbayobora ni babi: chat yambonetse vuba, igiciro kiraryoshye.â€ ğŸ›ï¸</p>
          <span class="name">â€” Cynthia, Kamenge</span>
        </article>
        <article class="testimonial">
          <div class="stars" aria-label="5 stars">â­â­â­â­â­</div>
          <p>â€œWhatsApp checkout yihuta cane, ndanyuzwe.â€ âš¡</p>
          <span class="name">â€” Vanessa, Kinindo</span>
        </article>
      </div>
    </div>
  </section>

  <!-- Daily Joke Spinner -->
  <!-- Comment: Joke nshasha buri munsi mu Kirundi; localStorage yirinda gusubiramo. -->
  <section id="jokes" class="section">
    <div class="container">
      <h2>Joke y'umunsi</h2>
      <div class="joke-box">
        <p id="dailyJoke">Itegerezwa kugaragara hano...</p>
        <button id="refreshJoke" class="btn secondary">Hindura joke ğŸŒ€</button>
      </div>
    </div>
  </section>

  <!-- Chatbot: youthful UI + emojis + product search + cart + checkout -->
  <!-- Comment: Conversational flow nkâ€™umukozi wa boutique. -->
  <section id="chat" class="section alt">
    <div class="container">
      <h2>Chatbot ya Boutique ğŸ¤–</h2>
      <p class="lead">Andika: â€œMurahoâ€, â€œNdashaka amataâ€, â€œOngeraho phoneâ€, â€œCartâ€, â€œNdarangijeâ€.</p>

      <div class="chat-grid">
        <div class="model-select">
          <label for="model">Model:</label>
          <select id="model">
            <option value="gpt-4o">GPT-4o</option>
            <option value="claude">Claude</option>
            <option value="gemini">Gemini</option>
          </select>
          <button id="greetBtn" class="btn secondary">Muramuke ğŸ‘‹</button>
        </div>

        <div id="chatWindow" class="chat-window" aria-live="polite">
          <!-- Messages will appear here -->
        </div>

        <div class="chat-controls">
          <input id="chatInput" type="text" placeholder="Andika hano..." />
          <button id="sendBtn" class="btn primary">Ohereza</button>
        </div>
      </div>
    </div>
  </section>

  <!-- Google Maps: Gihosha Gisandema -->
  <section id="map" class="section">
    <div class="container">
      <h2>Aho turi: Gihosha Gisandema</h2>
      <div class="map-embed">
        <iframe title="Gihosha Gisandema" src="https://www.google.com/maps?q=-3.4590,29.378&z=15&output=embed" width="100%" height="360" style="border:0" allowfullscreen="" loading="lazy"></iframe>
      </div>
    </div>
  </section>

  <!-- Contact: FormSubmit -->
  <section id="contact" class="section alt">
    <div class="container">
      <h2>Twandikire</h2>
      <form class="contact-form" action="https://formsubmit.co/your-formsubmit-key" method="POST">
        <input type="hidden" name="_subject" value="Message ya Jeune Boutique" />
        <input type="hidden" name="_captcha" value="false" />
        <input type="hidden" name="_next" value="https://yourdomain.com/thanks.html" />

        <label>
          Izina
          <input type="text" name="name" placeholder="Izina ryawe" required />
        </label>
        <label>
          Email
          <input type="email" name="email" placeholder="Email yawe" required />
        </label>
        <label>
          Ubutumwa
          <textarea name="message" rows="4" placeholder="Andika ubutumwa..." required></textarea>
        </label>

        <button class="btn primary" type="submit">Ohereza</button>
      </form>
    </div>
  </section>

  <!-- WhatsApp support -->
  <section id="support" class="section">
    <div class="container">
      <h2>WhatsApp Support & Maintenance</h2>
      <div class="support-card">
        <p>
          Ukeneye gufashwa vuba? Kanda hano tukuhuze na WhatsApp. Maintenance irimwo: updates, catalogue expansion, integrations. ğŸ”§
        </p>
        <a class="btn primary" href="https://wa.me/25771633859?text=Ndashaka%20gufasha%20na%20Jeune%20Boutique" target="_blank" rel="noopener">
          WhatsApp Autoresponder ğŸ’¬
        </a>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer>
    <div class="container footer-grid">
      <div>
        <h3>Contacts</h3>
        <p>ğŸ“ +25771633859</p>
        <p>ğŸ“§ ornoirbruce5@gmail.com</p>
        <p>ğŸ“ Gihosha</p>
      </div>
      <div>
        <h3>Social</h3>
        <p>
          <a href="https://wa.me/25771633859" target="_blank" rel="noopener">WhatsApp</a> |
          <a href="#" target="_blank" rel="noopener">Instagram</a> |
          <a href="#" target="_blank" rel="noopener">Facebook</a>
        </p>
        <img src="whatsapp-qr.jpg" alt="QR Code ya WhatsApp" class="qr" />
      </div>
      <div>
        <h3>About</h3>
        <p>Jeune Boutique: supermarket ya digital y'igihe gishasha, ikurura urubyiruko kandi yorohereza kugura.</p>
      </div>
    </div>
    <div class="container">
      <p style="color:#8a93a6">Â© 2025 Jeune Boutique. Byose birakingiwe.</p>
    </div>
  </footer>

  <!-- Scripts: interactivity yose, catalogue inline, chatbot -->
  <script>
    // ----- Voice controls (hero + nav shortcut) -----
    const heroAudio = document.getElementById('heroAudio');
    document.getElementById('playAudio').addEventListener('click', () => heroAudio.play());
    document.getElementById('playAudioNav').addEventListener('click', () => heroAudio.play());

    // ----- Catalogue inline (supermarket-style JSON) -----
    const products = [
      {
        id:"milk-1", name:"Amata ya Fresh", category:"Groceries",
        description:"Amata y'umwimerere yagiye mu buroko neza.",
        priceBIF:2500, inStock:true, image:"images/milk.jpg"
      },
      {
        id:"phone-1", name:"Smartphone X", category:"Electronics",
        description:"Telefon ikomeye, camera nziza, battery iramba.",
        priceBIF:230000, inStock:true, image:"images/phone.jpg"
      },
      {
        id:"cream-1", name:"CrÃ¨me ya mukarange", category:"Beauty",
        description:"CrÃ¨me yorohereza uruhu, idafise ibishobora kurugora.",
        priceBIF:8500, inStock:false, image:"images/cream.jpg"
      },
      {
        id:"speaker-1", name:"Bluetooth Speaker", category:"Electronics",
        description:"Speaker yâ€™ijwi ryiza, yoroheje kuyikorana.",
        priceBIF:68000, inStock:true, image:"images/speaker.jpg"
      },
      {
        id:"pan-1", name:"Ipanu iramba", category:"Home",
        description:"Ipanu iramba, ikwirikira ubushyuhe neza.",
        priceBIF:18000, inStock:true, image:"images/pan.jpg"
      }
    ];

    // ----- Stock rendering, search & categories -----
    const stockBody = document.getElementById('stockBody');
    const searchInput = document.getElementById('searchInput');
    const categorySelect = document.getElementById('categorySelect');

    let cart = [];

    function renderProducts(items){
      stockBody.innerHTML = '';
      items.forEach((p, idx)=>{
        const tr = document.createElement('tr');
        tr.style.animation = \`fadeIn 300ms ease \${idx*60}ms both\`;
        tr.innerHTML = \`
          <td><img src="\${p.image}" alt="\${p.name}"></td>
          <td>\${p.name}</td>
          <td>\${p.description}</td>
          <td>\${formatBIF(p.priceBIF)}</td>
          <td>\${p.inStock ? 'ğŸ“¦ Muri stock' : 'ğŸš« Vyashize'}</td>
          <td>
            <button class="btn secondary" \${p.inStock?'':'disabled'} data-id="\${p.id}">
              Ongeraho ğŸ§º
            </button>
          </td>\`;
        stockBody.appendChild(tr);
      });

      // Bind add-to-cart
      stockBody.querySelectorAll('button[data-id]').forEach(btn=>{
        btn.addEventListener('click', ()=>{
          const id = btn.getAttribute('data-id');
          const item = products.find(p=>p.id===id);
          if(!item) return;
          if(!item.inStock){ botSay("Ico kintu cyashize mu bubiko ğŸš«"); return; }
          cart.push(item); updateCartInfo();
          botSay(\`Okeye! â€œ\${item.name}â€ yongewe mu cart ğŸ§º\`);
        });
      });
    }
    renderProducts(products);

    function formatBIF(n){ return new Intl.NumberFormat('rw-RW').format(n); }

    function applyFilters(){
      const q = (searchInput.value||'').toLowerCase().trim();
      const cat = categorySelect.value;
      const filtered = products.filter(p=>{
        const matchesText = !q || p.name.toLowerCase().includes(q.replace('ndashaka ',''))
            || p.category.toLowerCase().includes(q)
            || p.description.toLowerCase().includes(q);
        const matchesCat = !cat || p.category===cat;
        return matchesText && matchesCat;
      });
      renderProducts(filtered);
    }
    searchInput.addEventListener('input', applyFilters);
    categorySelect.addEventListener('change', applyFilters);

    // ----- Cart info + checkout handoff -----
    function updateCartInfo(){
      const cartInfo = document.getElementById('cartInfo');
      const total = cart.reduce((acc,p)=>acc+p.priceBIF,0);
      cartInfo.textContent = \`Cart yawe ifite ibintu \${cart.length}, total \${formatBIF(total)} BIF ğŸ§º\`;
    }
    document.getElementById('checkoutBtn').addEventListener('click', ()=>{
      if(cart.length===0){ botSay("Cart yawe iracyari ubusa. Ongeraho ibicuruzwa ubone uko ubandanya ğŸ§º"); return; }
      const summary = cart.map(p=>\`\${p.name} (\${formatBIF(p.priceBIF)} BIF)\`).join(', ');
      const total = cart.reduce((acc,p)=>acc+p.priceBIF,0);
      const msg = encodeURIComponent(\`Narangije kugura: \${summary}. Total: \${formatBIF(total)} BIF\`);
      window.open(\`https://wa.me/25771633859?text=\${msg}\`, '_blank');
      botSay("Twaguhuje na WhatsApp kugira urangize kwishura ğŸ’¬");
    });

    // ----- Daily jokes (Kirundi) with localStorage -----
    const jokes = [
      "Umwavu n'ingwe: 'Ndaguhaye indogobwa.' Ingwe: 'Ntiwampaye, uri kuyinyereka!' ğŸ˜„",
      "Umusaza yagiye ku misa asinzira, pasitori ati: 'Amen' aratsa: 'Aha ni he?' ğŸ˜‚",
      "Umugore ati: 'Ndagura amata.' Umugabo: 'Ni amafaranga yo kugura amata.' ğŸ¤­",
      "Umwana ati: 'Mama, impuzu zanje zanyuze kuri internet?' Mama: 'Zanyuze kuri layini!' ğŸ˜†",
      "Ababanyi: 'Umuturanyi wawe yaguze radio?' 'Oya, ni WhatsApp ya gishaje!' ğŸ¤£"
    ];
    const jokeEl = document.getElementById('dailyJoke');
    const refreshJokeBtn = document.getElementById('refreshJoke');

    function setDailyJoke(forceNew=false){
      const today = new Date().toISOString().slice(0,10);
      const key = 'dailyJoke';
      const stored = JSON.parse(localStorage.getItem(key)||'{}');
      if(!forceNew && stored.date===today && stored.text){ jokeEl.textContent = stored.text; return; }
      let pool = jokes.slice();
      if(stored.text) pool = pool.filter(j => j !== stored.text);
      const chosen = pool[Math.floor(Math.random()*pool.length)] || jokes[0];
      jokeEl.textContent = chosen;
      localStorage.setItem(key, JSON.stringify({date:today, text:chosen}));
    }
    setDailyJoke();
    refreshJokeBtn.addEventListener('click', ()=> setDailyJoke(true));

    // ----- Chatbot: youthful interface + emojis + intents -----
    const chatWindow = document.getElementById('chatWindow');
    const chatInput = document.getElementById('chatInput');
    const sendBtn = document.getElementById('sendBtn');
    const greetBtn = document.getElementById('greetBtn');
    const modelSelect = document.getElementById('model');

    // Helpers
    function appendMsg(content, role='bot', avatarSrc='images/bot.jpg'){
      const wrap = document.createElement('div');
      wrap.className = \`chat-message \${role}\`;
      const avatar = role==='bot' ? \`<img class="avatar" src="\${avatarSrc}" alt="Bot">\` : '';
      wrap.innerHTML = \`\${avatar}<div>\${escapeHTML(content).replace(/\\n/g,'<br>')}</div>\`;
      chatWindow.appendChild(wrap);
      chatWindow.scrollTop = chatWindow.scrollHeight;
    }
    function botSay(text){ appendMsg(text, 'bot', 'images/bot.jpg'); }
    function escapeHTML(str){ const p=document.createElement('p'); p.textContent=str; return p.innerHTML; }
    function formatList(results){
      return results.slice(0,5).map(p => \`â€¢ \${p.name} â€” \${formatBIF(p.priceBIF)} BIF \${p.inStock ? 'ğŸ“¦' : 'ğŸš«'}\`).join('\\n');
    }

    // Greeting
    greetBtn.addEventListener('click', ()=>{
      botSay("Murakaza neza muri Supermarket yacu ğŸ›ï¸! Ndabafasha iki uyu munsi?");
    });

    // Send handling
    sendBtn.addEventListener('click', handleUserMessage);
    chatInput.addEventListener('keydown', (e)=>{ if(e.key==='Enter'){ e.preventDefault(); handleUserMessage(); } });

    function handleUserMessage(){
      const text = chatInput.value.trim();
      if(!text) return;
      appendMsg(text, 'user');
      chatInput.value = '';

      const t = text.toLowerCase();

      // Search intent: "Ndashaka amata" or category words
      if(t.startsWith('ndashaka') || t.includes('electronics') || t.includes('groceries') || t.includes('beauty') || t.includes('home')){
        const query = t.replace('ndashaka','').trim();
        const results = products.filter(p =>
          p.name.toLowerCase().includes(query) ||
          p.category.toLowerCase().includes(query)
        );
        if(results.length===0){
          botSay("Nta bicuruzwa bihuye n'ivyo washakishije ğŸ˜•. Andika izina ry'ikintu cyangwa ugerageze category.");
        } else {
          botSay(\`Ibisubizo:\n\${formatList(results)}\nAndika: 'ongeraho [izina]' kugira nguhereze mu cart ğŸ§º\`);
        }
        return;
      }

      // Add to cart via chat: "ongeraho amata"
      if(t.startsWith('ongeraho')){
        const term = t.replace('ongeraho','').trim();
        const match = products.find(p => p.name.toLowerCase().includes(term));
        if(!match){ botSay("Sinabonye ico kintu. Andika neza izina, urugero: 'Ongeraho amata'."); return; }
        if(!match.inStock){ botSay("Icyo kintu cyashize mu bubiko ğŸš«"); return; }
        cart.push(match); updateCartInfo();
        botSay(\`Okeye! â€œ\${match.name}â€ yongewe mu cart ğŸ§º. Ukeneye ibindi?\`);
        return;
      }

      // Cart status
      if(t.includes('cart') || t.includes('ibintu')){
        const total = cart.reduce((acc,p)=>acc+p.priceBIF,0);
        botSay(\`Cart yawe ifite ibintu \${cart.length}, total \${formatBIF(total)} BIF ğŸ§º\`);
        return;
      }

      // Checkout handoff
      if(t.includes('ndarangije') || t.includes('checkout') || t.includes('gura')){
        const summary = cart.map(p=>\`\${p.name} (\${formatBIF(p.priceBIF)} BIF)\`).join(', ');
        const total = cart.reduce((acc,p)=>acc+p.priceBIF,0);
        botSay("Tuguhuje na WhatsApp cyangwa ukuzuza contact form kugira urangize ğŸ§¾ğŸ’¬.");
        const msg = encodeURIComponent(\`Narangije kugura: \${summary}. Total: \${formatBIF(total)} BIF\`);
        window.open(\`https://wa.me/25771633859?text=\${msg}\`, '_blank');
        return;
      }

      // Greeting / smalltalk
      if(t.includes('muraho') || t.includes('amahoro')){
        botSay("Murakoze ku kuganira natwe ğŸ‘‹. Ndabafasha iki uyu munsi?");
        return;
      }

      // Fallback: mock LLM with emoji enrichment
      const reply = \`Nashitse ku kibazo: â€œ\${text}â€. Ndakugerageza gufasha vuba.\`;
      botSay(enrichWithEmojis(reply, text));
    }

    function enrichWithEmojis(reply, userText){
      const t = userText.toLowerCase();
      let emoji = 'ğŸ™‚';
      if(t.includes('muraho') || t.includes('bonjour')) emoji = 'ğŸ‘‹';
      if(t.includes('nez') || t.includes('merci')) emoji = 'ğŸ’–';
      if(t.includes('problem') || t.includes('ntibikunda')) emoji = 'ğŸ’¡';
      return \`\${reply} \${emoji}\`;
    }

    // ----- Utility: initial bot greeting after load -----
    setTimeout(()=> botSay("Murakaza neza muri Supermarket yacu ğŸ›ï¸! Andika: â€˜Ndashaka amataâ€™ cyangwa â€˜Electronicsâ€™."), 600);
  </script>
</body>
</html>
